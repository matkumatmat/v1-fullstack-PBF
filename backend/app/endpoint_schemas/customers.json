{"openapi":"3.1.0","info":{"title":"My Advanced FastAPI App","description":"API with structured logging and observability.","version":"0.1.0"},"paths":{"/api/v1/customer/customers/onboard":{"post":{"tags":["Customers & Branches"],"summary":"Onboard Customer Baru (Orkestrasi Penuh)","description":"Membuat entitas Customer baru beserta seluruh hierarki Branch dan Location-nya\ndalam satu transaksi. Gunakan ini untuk onboarding customer baru yang kompleks.","operationId":"onboard_new_customer_endpoint_api_v1_customer_customers_onboard_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerOnboard"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerWithBranchesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customer/customers":{"get":{"tags":["Customers & Branches"],"summary":"Dapatkan Daftar Semua Customer","description":"Mengambil daftar semua customer dengan data dasar.\nEndpoint ini mendukung paginasi menggunakan parameter `skip` dan `limit`.","operationId":"get_all_customers_endpoint_api_v1_customer_customers_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","lte":1000,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CustomerResponse"},"title":"Response Get All Customers Endpoint Api V1 Customer Customers Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customer/customers/{customer_public_id}":{"get":{"tags":["Customers & Branches"],"summary":"Dapatkan Detail Lengkap Customer","description":"Mengambil detail lengkap seorang customer, termasuk detail finansial,\nspesifikasi, dan seluruh hierarki branch beserta lokasinya.","operationId":"get_customer_details_endpoint_api_v1_customer_customers__customer_public_id__get","parameters":[{"name":"customer_public_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Customer Public Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerWithBranchesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customer/customers/{customer_public_id}/branches":{"post":{"tags":["Customers & Branches"],"summary":"Tambahkan Hierarki Branch Baru ke Customer","description":"Menambahkan satu atau lebih branch (beserta lokasinya) ke customer yang sudah ada.\nPayload berisi seluruh struktur hierarki branch baru yang akan ditambahkan.","operationId":"add_branch_to_customer_endpoint_api_v1_customer_customers__customer_public_id__branches_post","parameters":[{"name":"customer_public_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Customer Public Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BranchCreateForExistingCustomer"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerWithBranchesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customer/customers/branches/{branch_public_id}":{"get":{"tags":["Customers & Branches"],"summary":"Dapatkan Detail Branch","description":"Mengambil detail satu branch spesifik, termasuk daftar lokasinya\ndan anak-anaknya (satu level).","operationId":"get_branch_details_endpoint_api_v1_customer_customers_branches__branch_public_id__get","parameters":[{"name":"branch_public_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Branch Public Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BranchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customer/customers/branches/{branch_public_id}/locations":{"post":{"tags":["Customers & Branches"],"summary":"Tambahkan Lokasi Baru ke Branch","description":"Menambahkan satu lokasi fisik baru (gudang, panel, dll.) ke branch yang sudah ada.","operationId":"add_location_to_branch_endpoint_api_v1_customer_customers_branches__branch_public_id__locations_post","parameters":[{"name":"branch_public_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Branch Public Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LocationCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LocationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customer/customers/locations/{location_public_id}":{"get":{"tags":["Customers & Branches"],"summary":"Dapatkan Detail Location","description":"Mengambil detail dari satu lokasi fisik spesifik.","operationId":"get_location_details_endpoint_api_v1_customer_customers_locations__location_public_id__get","parameters":[{"name":"location_public_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Location Public Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LocationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","description":"Endpoint root sederhana untuk pengujian.","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BranchCreateForExistingCustomer":{"properties":{"branch_data":{"$ref":"#/components/schemas/BranchNestedCreate"}},"type":"object","required":["branch_data"],"title":"BranchCreateForExistingCustomer","description":"PAYLOAD untuk endpoint `POST /customers/{customer_public_id}/branches`\nMewarisi FePlBase."},"BranchNestedCreate":{"properties":{"name":{"type":"string","maxLength":150,"title":"Name"},"locations":{"items":{"$ref":"#/components/schemas/LocationCreate"},"type":"array","minItems":1,"title":"Locations","description":"Setiap branch baru harus punya minimal satu lokasi."},"children":{"items":{"$ref":"#/components/schemas/BranchNestedCreate"},"type":"array","title":"Children"}},"type":"object","required":["name"],"title":"BranchNestedCreate","description":"SKEMA DASAR: Membuat satu Branch baru, bisa berisi Location dan anak Branch."},"BranchResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"public_id":{"type":"string","format":"uuid","title":"Public Id"},"name":{"type":"string","title":"Name"},"locations":{"items":{"$ref":"#/components/schemas/LocationResponse"},"type":"array","title":"Locations","default":[]},"children":{"items":{"$ref":"#/components/schemas/BranchResponse"},"type":"array","title":"Children","default":[]}},"type":"object","required":["created_at","updated_at","public_id","name"],"title":"BranchResponse","description":"SKEMA RESPONSE: Data satu Branch, bisa nested."},"CustomerDetailsCreate":{"properties":{"npwp":{"anyOf":[{"type":"string","maxLength":25},{"type":"null"}],"title":"Npwp"},"bank":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Bank"},"rekening":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Rekening"}},"type":"object","title":"CustomerDetailsCreate","description":"SKEMA DASAR: Detail finansial Customer. Bagian dari payload input."},"CustomerOnboard":{"properties":{"name":{"type":"string","maxLength":100,"title":"Name"},"customer_type":{"$ref":"#/components/schemas/CustomerTypeEnum"},"details":{"$ref":"#/components/schemas/CustomerDetailsCreate"},"specification":{"$ref":"#/components/schemas/CustomerSpecificationCreate"},"branches":{"items":{"$ref":"#/components/schemas/BranchNestedCreate"},"type":"array","title":"Branches"}},"type":"object","required":["name","customer_type","details","specification"],"title":"CustomerOnboard","description":"PAYLOAD untuk endpoint `POST /customers/onboard`"},"CustomerResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"public_id":{"type":"string","format":"uuid","title":"Public Id"},"name":{"type":"string","title":"Name"},"customer_type":{"$ref":"#/components/schemas/CustomerTypeEnum"}},"type":"object","required":["created_at","updated_at","public_id","name","customer_type"],"title":"CustomerResponse","description":"SKEMA RESPONSE: Data dasar Customer.\nMewarisi FeResBase."},"CustomerSpecificationCreate":{"properties":{"default_credit_limit":{"type":"number","minimum":0.0,"title":"Default Credit Limit","default":0.0},"default_payment_terms_days":{"type":"integer","minimum":0.0,"title":"Default Payment Terms Days","default":30}},"type":"object","title":"CustomerSpecificationCreate","description":"SKEMA DASAR: Spesifikasi komersial Customer. Bagian dari payload input."},"CustomerTypeEnum":{"type":"string","enum":["PEMERINTAH","DISTRIBUTOR","RETAIL"],"title":"CustomerTypeEnum"},"CustomerWithBranchesResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"public_id":{"type":"string","format":"uuid","title":"Public Id"},"name":{"type":"string","title":"Name"},"customer_type":{"$ref":"#/components/schemas/CustomerTypeEnum"},"details":{"$ref":"#/components/schemas/CustomerDetailsCreate"},"specification":{"$ref":"#/components/schemas/CustomerSpecificationCreate"},"branches":{"items":{"$ref":"#/components/schemas/BranchResponse"},"type":"array","title":"Branches","default":[]}},"type":"object","required":["created_at","updated_at","public_id","name","customer_type","details","specification"],"title":"CustomerWithBranchesResponse","description":"SKEMA RESPONSE: Customer lengkap dengan seluruh hierarki branch-nya."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LocationCreate":{"properties":{"name":{"type":"string","maxLength":150,"title":"Name"},"location_type":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Location Type"},"country":{"type":"string","maxLength":50,"title":"Country","default":"Indonesia"},"state_province":{"type":"string","maxLength":50,"title":"State Province"},"postal_code":{"anyOf":[{"type":"string","maxLength":15},{"type":"null"}],"title":"Postal Code"},"city":{"type":"string","maxLength":50,"title":"City"},"addr_line_1":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Addr Line 1"},"addr_line_2":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Addr Line 2"},"addr_line_3":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Addr Line 3"},"longitude":{"anyOf":[{"type":"number","maximum":180.0,"minimum":-180.0},{"type":"null"}],"title":"Longitude"},"latitude":{"anyOf":[{"type":"number","maximum":90.0,"minimum":-90.0},{"type":"null"}],"title":"Latitude"},"is_default":{"type":"boolean","title":"Is Default","default":false},"is_active":{"type":"boolean","title":"Is Active","default":true},"location_pic":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Location Pic"},"location_pic_contact":{"anyOf":[{"type":"string","maxLength":15},{"type":"null"}],"title":"Location Pic Contact"},"minimal_order_value":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Minimal Order Value","default":0.0},"delivery_instructions":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Delivery Instructions"}},"type":"object","required":["name","state_province","city","addr_line_1","addr_line_2","addr_line_3","location_pic","location_pic_contact","delivery_instructions"],"title":"LocationCreate","description":"SKEMA DASAR: Membuat satu Location baru."},"LocationResponse":{"properties":{"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"public_id":{"type":"string","format":"uuid","title":"Public Id"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"location_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Type"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"},"state_province":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State Province"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"addr_line_1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Addr Line 1"},"addr_line_2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Addr Line 2"},"addr_line_3":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Addr Line 3"},"longitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Longitude"},"latitude":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Latitude"},"is_default":{"type":"boolean","title":"Is Default"},"is_active":{"type":"boolean","title":"Is Active"},"location_pic":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Pic"},"location_pic_contact":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Pic Contact"},"minimal_order_value":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Minimal Order Value"},"delivery_instructions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delivery Instructions"}},"type":"object","required":["created_at","updated_at","public_id","name","location_type","country","state_province","postal_code","city","addr_line_1","addr_line_2","addr_line_3","longitude","latitude","is_default","is_active","location_pic","location_pic_contact","minimal_order_value","delivery_instructions"],"title":"LocationResponse","description":"Mewarisi FeResBase untuk mendapatkan public_id, timestamps, dan ORM mode."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}